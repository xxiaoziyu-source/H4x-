local Translations = {
    --["待替换英文"] = "对应中文",
        -- 验证界面
"Gameplay Settings": "游戏性设置",
"Settings": "设置",
"Animation": "动画",
"Other": "其他",
"Change Animation V2": "更改动画 V2",
"Anim Skill Old": "旧动画技能",
"Anim Skill New": "新动画技能",
"AutoBlock": "自动格挡",
"Skills & Selector": "技能与选择器",
"Instant ProximityPrompt": "即时接近提示",
"Unload Script": "卸载脚本",
"Lock WalkSpeedModifier": "锁定行走速度修正器",
"Enable Custom MaxStamina": "启用自定义最大耐力",
"Custom MaxStamina (0-999999)": "自定义最大耐力（0-999999）",
"Anti-Artful Walls": "反巧妙墙壁",
"Implement Fast Artful": "实现快速巧妙",
"Speed Settings": "速度设置",
"Enable Dash": "启用冲刺",
"Dash Size": "冲刺大小",
"Enable Banana": "启用香蕉",
"Banana Size": "香蕉大小",
"Enable BonusPad": "启用奖励垫",
"BonusPad Size": "奖励垫大小",
"Enable Adrenaline": "启用肾上腺素",
"Adrenaline Size": "肾上腺素大小",
"Taunt Size": "嘲讽大小",
"Enable Cloak": "启用隐身",
"Cloak Size": "隐身大小",
"Enable Punch": "启用拳击",
"Punch Size": "拳击大小",
"Enable Caretaker": "启用管理员",
"Caretaker Size": "管理员大小",
"Enable Hotdog": "启用热狗",
"Hotdog Size": "热狗大小",
"Enable Taunt": "启用嘲讽",
"Select Skill1": "选择技能1",
"Revolver": "左轮手枪",
"Select Skill2": "选择技能2",
"Caretaker": "管理员",
"Select Skills": "选择技能",
"Enable Revolver": "启用左轮手枪",
"Revolver Size": "左轮手枪大小",
"Killer ESP": "杀手透视",
"Ghost ESP": "幽灵透视",
"Delete Block (Animation)": "删除格挡（动画）",
"Show Cooldown": "显示冷却",
"Enable Pursuer": "启用追踪者",
"Enable Harken": "启用哈肯",
"Enable Killdroid": "启用杀戮机器人",
"Enable Badware": "启用恶意软件",
"Enable Artful": "启用巧妙",
"Block Distance": "格挡距离",
"WalkSpeed": "行走速度",
"Enable WalkSpeed": "启用行走速度",
"SprintSpeed": "冲刺速度",
"Enable Sprint": "启用冲刺"
"Survivor ESP": "幸存者透视",
"Killer ESP": "杀手透视",
"Ghost ESP": "幽灵透视",
"Enable ESP": "启用透视",
"Show Name": "显示名称",
"Show HP": "显示生命值",
"Show Fill": "显示填充",
"Fill Color": "填充颜色",
"Fill Transparency": "填充透明度",
"Show Outline": "显示轮廓",
"Outline Color": "轮廓颜色",
"Outline Transparency": "轮廓透明度"

}      
local translated = setmetatable({}, {__mode = "k"}) -- 弱引用存储已汉化控件

-- 翻译函数：先模糊匹配，再完全匹配
local function translate(text)
    if type(text) ~= "string" then return text end
    local res = text
    -- 模糊替换（抓长文本关键词）
    for en, cn in pairs(Translations) do
        if en ~= "" then res = res:gsub(en, cn) end
    end
    -- 完全匹配兜底
    return Translations[res] or res
end

-- 单个控件汉化+实时监听
local function localize(obj)
    if not obj:IsA("TextLabel") and not obj:IsA("TextButton") and not obj:IsA("TextBox") then return end
    if translated[obj] then return end

    -- 初始汉化
    pcall(function() obj.Text = translate(obj.Text) end)
    translated[obj] = true

    -- 监听文本变更
    obj:GetPropertyChangedSignal("Text"):Connect(function()
        pcall(function() obj.Text = translate(obj.Text) end)
    end)
end

-- 批量扫描+监听新控件
local function setup(parent)
    if not parent then return end
    -- 扫描已有控件
    for _, obj in ipairs(parent:GetDescendants()) do localize(obj) end
    -- 监听新添加控件
    parent.DescendantAdded:Connect(function(obj) task.wait(0.05) localize(obj) end)
end

-- 主初始化
local function init()
    local ok = pcall(function()
        -- 元表劫持（高效覆盖）
        local mt = getrawmetatable(game)
        local old = mt.__newindex
        setreadonly(mt, false)
        mt.__newindex = newcclosure(function(t, k, v)
            if (t:IsA("TextLabel") or t:IsA("TextButton") or t:IsA("TextBox")) and k == "Text" then
                v = translate(tostring(v))
                translated[t] = true
            end
            return old(t, k, v)
        end)
        setreadonly(mt, true)
    end)

    -- 劫持失败则用兼容模式
    if not ok then
        setup(game:GetService("CoreGui")) -- 系统UI
        setup(game.Players.LocalPlayer:WaitForChild("PlayerGui")) -- 玩家UI
        -- 监听3D文本
        game.Workspace.DescendantAdded:Connect(function(obj)
            if obj:IsA("SurfaceGui") or obj:IsA("BillboardGui") then setup(obj) end
        end)
    end
end

task.wait(1)
init()
loadstring(game:HttpGet("https://raw.githubusercontent.com/tranvanxanh0502-afk/Die-Oof-Death/refs/heads/main/Die-Oof-Death.lua"))()
-- 加载外部脚本
pcall(function()

end)
